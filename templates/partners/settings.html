{% extends 'partners/_layout.html' %}

{% block partner_title %}Settings - {{ organization.name }} | Imara{% endblock %}

{% block partner_content %}
<div class="max-w-4xl mx-auto">
    <div class="mb-6">
        <h1 class="text-2xl font-bold text-imara-deep dark:text-imara-gold">
            <i class="bi bi-gear mr-2"></i> Settings
        </h1>
        <p class="text-gray-500 mt-1">Organization profile and contact details</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div class="glass-panel p-6">
            <h2 class="text-lg font-bold text-imara-deep dark:text-imara-cream mb-4">Organization</h2>
            <dl class="space-y-3 text-sm">
                <div class="flex justify-between">
                    <dt class="text-gray-500 dark:text-gray-400">Name</dt>
                    <dd class="font-medium text-gray-900 dark:text-white">{{ organization.name }}</dd>
                </div>
                <div class="flex justify-between">
                    <dt class="text-gray-500 dark:text-gray-400">Type</dt>
                    <dd class="font-medium text-gray-900 dark:text-white">{{ organization.get_org_type_display }}</dd>
                </div>
                <div class="flex justify-between">
                    <dt class="text-gray-500 dark:text-gray-400">Jurisdiction</dt>
                    <dd class="font-medium text-gray-900 dark:text-white">{{ organization.jurisdiction }}</dd>
                </div>
                <div class="flex justify-between">
                    <dt class="text-gray-500 dark:text-gray-400">Verification</dt>
                    <dd class="font-medium {% if organization.is_verified %}text-green-700 dark:text-green-400{% else %}text-yellow-700 dark:text-yellow-400{% endif %}">
                        {% if organization.is_verified %}Verified{% else %}Pending{% endif %}
                    </dd>
                </div>
                <div class="flex justify-between">
                    <dt class="text-gray-500 dark:text-gray-400">Seats</dt>
                    <dd class="font-medium text-gray-900 dark:text-white">{{ organization.seats_used }} / {{ organization.max_seats }}</dd>
                </div>
            </dl>
        </div>

        <div class="glass-panel p-6">
            <h2 class="text-lg font-bold text-imara-deep dark:text-imara-cream mb-4">Contact details</h2>

            {% if is_admin %}
            <form method="post" class="space-y-4">
                {% csrf_token %}
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="contact_email">Dispatch email</label>
                    <input id="contact_email" name="contact_email" type="email" required value="{{ organization.contact_email }}"
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-imara-gold">
                    <p class="text-xs text-gray-500 mt-1">Forensic alerts will be sent here.</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="phone">Phone</label>
                    <input id="phone" name="phone" type="text" value="{{ organization.phone }}"
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-imara-gold">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="website">Website</label>
                    <input id="website" name="website" type="url" value="{{ organization.website }}"
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-imara-gold">
                </div>
                <button type="submit"
                    class="w-full bg-imara-deep hover:bg-imara-deep/90 text-white font-semibold py-3 px-6 rounded-xl transition-all">
                    <i class="bi bi-save mr-2"></i> Save
                </button>
            </form>
            {% else %}
            <div class="text-sm text-gray-600 dark:text-gray-300">
                <p><strong>Dispatch email:</strong> {{ organization.contact_email }}</p>
                {% if organization.phone %}<p class="mt-2"><strong>Phone:</strong> {{ organization.phone }}</p>{% endif %}
                {% if organization.website %}<p class="mt-2"><strong>Website:</strong> <a class="text-imara-gold hover:underline" href="{{ organization.website }}" target="_blank" rel="noopener noreferrer">{{ organization.website }}</a></p>{% endif %}
                <div class="mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl">
                    <i class="bi bi-info-circle mr-2"></i>
                    Only organization admins can update settings.
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

